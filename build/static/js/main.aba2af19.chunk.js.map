{"version":3,"sources":["Signin.js","components/Input.js","EditContact.js","ListContacts.js","App.js","index.js"],"names":["Signin","handleSignIn","this","props","className","id","onClick","bind","Component","InputGroup","Styled","div","Input","input","EditContact","fetchContact","identifier","setState","loading","Contact","get","then","contact","lastName","blockstackID","email","errors","notFound","catch","error","validateInput","state","checkExisting","handleSave","saving","Object","entries","length","new","newContact","createNewContact","constructIdentifier","contactExists","save","history","push","saveContact","handleDelete","deleting","delete","qs","parse","location","search","ignoreQueryPrefix","e","field","preventDefault","target","value","type","onChange","disabled","Link","to","withRouter","ListContacts","contacts","loaded","list","newContacts","map","index","key","handleSignOut","appConfig","AppConfig","userSession","UserSession","App","scopes","scope","authRequest","makeAuthRequest","undefined","solicitGaiaHubUrl","recommendedGaiaHubUrl","redirectToSignInWithAuthRequest","signUserOut","window","origin","isUserSignedIn","Switch","Route","exact","path","render","component","isSignInPending","handlePendingSignIn","userData","replaceState","document","title","ReactDOM","BrowserRouter","getElementById"],"mappings":"wdAEqBA,E,uKAET,IACAC,EAAiBC,KAAKC,MAAtBF,aAER,OACE,yBAAKG,UAAU,gBAAgBC,GAAG,aAChC,wBAAID,UAAU,mBAAd,YACA,uBAAGA,UAAU,QACX,4BACEA,UAAU,yBACVC,GAAG,gBACHC,QAAUL,EAAaM,KAAKL,OAH9B,iC,GAT0BM,a,4aCApC,IAAMC,EAAaC,IAAOC,IAAV,KAOVC,EAAQF,IAAOG,MAAV,K,oCCHLC,E,kDAEJ,WAAYX,GAAQ,IAAD,8BAClB,cAAMA,IA8BPY,aAAe,SAACC,GACd,EAAKC,SAAS,CACZC,SAAS,IAEXC,UAAQC,IAAIJ,GAAYK,MAAK,SAAAC,GACvBA,EACF,EAAKL,SAAS,CACZK,QAASA,EACTN,WAAYM,EAAQN,WACpBO,SAAUD,EAAQC,UAAY,GAC9BC,aAAcF,EAAQE,cAAgB,GACtCC,MAAOH,EAAQG,OAAS,GACxBP,SAAS,IAGX,EAAKD,SAAS,CACZC,SAAS,EACTQ,OAAQ,CAAEC,SAAU,qCAIzBC,OAAM,SAAAC,GACL,EAAKZ,SAAS,CACZC,SAAS,EACTQ,OAAQ,CAAEC,SAAU,sCAvDP,EAqEnBG,cAAgB,WACd,IAAIJ,EAAS,GAKb,MAJ4B,KAAxB,EAAKK,MAAMR,WACbG,EAAOH,SAAW,2BAGbG,GA3EU,EA8EnBM,cAAgB,SAAChB,GACf,OAAOG,UAAQC,IAAIJ,GAChBK,MAAK,SAACC,GACL,QAAIA,KAMLM,OAAM,WACL,OAAO,MAxFM,EA4FnBK,WAAa,WACX,IAAK,EAAKF,MAAMG,OAAQ,CACtB,IAAIR,EAAS,EAAKI,gBAClB,GAAIK,OAAOC,QAAQV,GAAQW,OAIzB,YAHA,EAAKpB,SAAS,CACZS,WASJ,GAJA,EAAKT,SAAS,CACZiB,QAAQ,IAGN,EAAKH,MAAMO,IAAK,CAClB,IAAMC,EAAa,EAAKC,mBACxB,OAAO,EAAKR,cAAcO,EAAWE,uBACpCpB,MAAK,SAACqB,GACL,IAAIA,EAMF,OAAOH,EAAWI,OAAOtB,MAAK,WAC5B,EAAKlB,MAAMyC,QAAQC,KAAK,QAN1B,EAAK5B,SAAS,CACZS,OAAQ,CAACgB,cAAc,KAAD,OAAO,EAAKX,MAAMR,SAAlB,wCACtBW,QAAQ,OASd,OAAO,EAAKY,gBA1HC,EA+HnBN,iBAAmB,WACjB,IAAMD,EAAa,CACjBhB,SAAU,EAAKQ,MAAMR,SACrBC,aAAc,EAAKO,MAAMP,aACzBC,MAAO,EAAKM,MAAMN,OAIpB,OADc,IAAIN,UAAQoB,IAtIT,EA0InBO,YAAc,WACZ,GAAI,EAAKf,MAAMT,QAAS,CACtB,IAAIiB,EAAa,EAAKR,MAAMT,QAC5BiB,EAAWhB,SAAW,EAAKQ,MAAMR,SACjCgB,EAAWf,aAAe,EAAKO,MAAMP,aACrCe,EAAWd,MAAQ,EAAKM,MAAMN,MAC9B,EAAKR,SAAS,CACZK,QAASiB,IAEXA,EAAWI,OAAOtB,MAAK,WACrB,EAAKlB,MAAMyC,QAAQC,KAAK,UApJX,EAyJnBE,aAAe,WACR,EAAKhB,MAAMiB,WACd,EAAK/B,SAAS,CACZ+B,UAAU,IAER,EAAKjB,MAAMT,SACb,EAAKS,MAAMT,QAAQ2B,SAAS5B,MAAK,WAC/B,EAAKlB,MAAMyC,QAAQC,KAAK,UA7J/B,EAAKd,MAAQ,CACVO,IAAKnC,EAAMmC,IACXhB,QAASH,UACTH,WAAY,GACZO,SAAU,GACVC,aAAc,GACdC,MAAO,GACPC,OAAQ,GACRQ,QAAQ,EACRhB,SAAS,EACT8B,UAAU,GAbK,E,gEAkBjB,IAAK9C,KAAKC,MAAMmC,IAAK,CACnB,IACItB,EADckC,IAAGC,MAAMjD,KAAKC,MAAMiD,SAASC,OAAQ,CAAEC,mBAAmB,IAC/CjD,GACzBW,EACFd,KAAKa,aAAaC,GAElBd,KAAKe,SAAS,CACZS,OAAQ,CAAEC,SAAU,oC,+BAmCnB4B,EAAGC,GACVD,EAAEE,iBACEF,EAAEG,OAAOC,MAAMtB,OAAS,IAC1BnC,KAAKe,SAAL,eACGuC,EAAQD,EAAEG,OAAOC,U,+BAsGd,IAAD,OACP,OACE,yBAAKvD,UAAU,gBAAgBC,GAAG,aAChC,wBAAID,UAAU,mBAAmBF,KAAK6B,MAAMO,IAAM,kBAAoB,sBACpEpC,KAAK6B,MAAML,OAAOC,UAAYzB,KAAK6B,MAAML,OAAOC,SAChDzB,KAAK6B,MAAMb,SAAW,cACrBhB,KAAK6B,MAAMb,UAAYhB,KAAK6B,MAAML,OAAOC,UAC1C,yBAAKvB,UAAU,SACb,kBAACK,EAAD,gBACU,6BACR,0BAAML,UAAU,eAAeF,KAAK6B,MAAML,OAAOH,UACjD,kBAACX,EAAD,CACEgD,KAAK,OACLD,MAAOzD,KAAK6B,MAAMR,SAClBsC,SAAU,SAAAN,GAAC,OAAI,EAAKM,SAASN,EAAG,gBAGpC,kBAAC9C,EAAD,uBACiB,6BACf,kBAACG,EAAD,CACEgD,KAAK,OACLD,MAAOzD,KAAK6B,MAAMP,aAClBqC,SAAU,SAAAN,GAAC,OAAI,EAAKM,SAASN,EAAG,oBAGpC,kBAAC9C,EAAD,iBACW,6BACT,kBAACG,EAAD,CACEgD,KAAK,OACLD,MAAOzD,KAAK6B,MAAMN,MAClBoC,SAAU,SAAAN,GAAC,OAAI,EAAKM,SAASN,EAAG,aAGpC,6BACErD,KAAK6B,MAAML,OAAOgB,eAClB,0BAAMtC,UAAU,eAAeF,KAAK6B,MAAML,OAAOgB,cAAc,6BAAK,8BACpE,yBAAKtC,UAAU,gBACb,4BACEA,UAAU,yBACVC,GAAG,cACHyD,SAAU5D,KAAK6B,MAAMG,OACrB5B,QAASJ,KAAK+B,YAEb/B,KAAK6B,MAAMG,OAAS,iBAAmB,QAE1C,4BACE9B,UAAU,wBACVC,GAAG,gBACHyD,SAAU5D,KAAK6B,MAAMiB,SACrB1C,QAASJ,KAAK6C,cAEb7C,KAAK6B,MAAMiB,SAAW,cAAgB,WAG7C,kBAACe,EAAA,EAAD,CACE3D,UAAU,yBACV4D,GAAG,KAFL,c,GA9NcxD,aA2OXyD,cAAWnD,GC3OLoD,E,kDAEnB,WAAY/D,GAAQ,IAAD,8BAClB,cAAMA,IAED4B,MAAQ,CACVoC,SAAU,GACVC,QAAQ,GALO,E,gEASE,IAAD,OAClBjD,UAAQkD,MAAK,SAACrD,GACZ,IAAIsD,EAAc,EAAKvC,MAAMoC,SAM7B,OALAG,EAAYzB,KAAK7B,GACjB,EAAKC,SAAS,CACZkD,SAAUG,EACVF,QAAQ,KAEH,O,+BAKT,OACE,yBAAKhE,UAAU,gBAAgBC,GAAG,aAChC,wBAAID,UAAU,mBAAd,YACA,yBAAKA,UAAU,SACb,yBAAKA,UAAU,gBACmB,IAA/BF,KAAK6B,MAAMoC,SAAS9B,QAAgBnC,KAAK6B,MAAMqC,QAAU,+CACzDlE,KAAK6B,MAAMoC,SAASI,KAAI,SAACjD,EAASkD,GACjC,OACE,uBAAGC,IAAKD,GACN,kBAACT,EAAA,EAAD,CACE3D,UAAU,cACV4D,GAAI,YAAc1C,GACjBA,OAKT,kBAACyC,EAAA,EAAD,CACE3D,UAAU,yBACV4D,GAAG,QAFL,uBAMA,6BAAK,6BAAK,4BAAQ5D,UAAU,kCAAkCE,QAASJ,KAAKC,MAAMuE,eAAxE,WACV,yF,GAhD8BlE,a,0BCWpCmE,EAAY,IAAIC,YAChBC,EAAc,IAAIC,cAAY,CAAEH,UAAWA,IAE5BI,E,2KAGNxB,GACXA,EAAEE,iBAGF,IAAMuB,EAAS,CAAC,cAAe,QAAS,eAAgB7D,UAAQ8D,OAC1DN,EAAY,IAAIC,YAAUI,GAG1BH,EAAc,IAAIC,cAAY,CAACH,UAAWA,IAC1CO,EAAcC,+BAAgBC,OAAWA,OAAWA,EAAWJ,OAAQI,OAAWA,EAAW,CACjGC,mBAAmB,EACnBC,sBAAuB,uCAGzBT,EAAYU,gCAAgCL,K,oCAGhC3B,GACZA,EAAEE,iBACFoB,EAAYW,YAAYC,OAAOrC,SAASsC,U,+BAGhC,IAAD,OACP,OACE,yBAAKtF,UAAU,gBACb,yBAAKA,UAAU,sBACVyE,EAAYc,iBAEX,kBAACC,EAAA,EAAD,KACE,kBAACC,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,IAAIC,OAAQ,kBAAM,kBAAC,EAAD,CAActB,cAAe,EAAKA,mBACtE,kBAACmB,EAAA,EAAD,CAAOE,KAAK,QAAQE,UAAWnF,IAC/B,kBAAC+E,EAAA,EAAD,CAAOE,KAAK,OAAOC,OAAQ,kBAAM,kBAAC,EAAD,CAAa1D,KAAG,QAJrD,kBAAC,EAAD,CAAQuC,YAAaA,EAAa5E,aAAeC,KAAKD,mB,0CAY3C,IAAD,OACd4E,EAAYqB,mBACdrB,EAAYsB,sBAAsB9E,MAAK,SAAC+E,GACtCX,OAAO7C,QAAQyD,aAAa,GAAIC,SAASC,MAAO,KAChD,EAAKtF,SAAS,CAAEmF,SAAUA,W,GA9CD5F,a,cCXjCgG,IAASR,OAAO,kBAACS,EAAA,EAAD,KAAe,kBAAC,EAAD,OAAyBH,SAASI,eAAe,W","file":"static/js/main.aba2af19.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Signin extends Component {\n\n  render() {\n    const { handleSignIn } = this.props;\n\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">KeyWatch</h1>\n        <p className=\"lead\">\n          <button\n            className=\"btn btn-primary btn-lg\"\n            id=\"signin-button\"\n            onClick={ handleSignIn.bind(this) }\n          >\n            Sign In with Blockstack\n          </button>\n        </p>\n      </div>\n    );\n  }\n}\n","import Styled from 'styled-components'\n\nconst InputGroup = Styled.div`\n  text-align: left;\n  display: block;\n  width: 300px;\n  margin: 10px;\n`\n\nconst Input = Styled.input`\n  border-radius: 3px;\n  border: 1px solid #ddd;\n  box-sizing: border-box;\n  padding-left: 10px;\n  display: inline-block;\n  outline: none;\n  width:100%;\n  margin:5px 0px;\n`\n\nexport { Input, InputGroup }","import React, { Component } from 'react';\nimport { Contact } from 'blockstack-collections'\nimport { InputGroup, Input } from './components/Input'\nimport { Link, withRouter } from 'react-router-dom'\nimport qs from 'qs'\n\nclass EditContact extends Component {\n\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n      new: props.new,\n      contact: Contact,\n      identifier: \"\",\n      lastName: \"\",\n      blockstackID: \"\",\n      email: \"\",\n      errors: {},\n      saving: false,\n      loading: false,\n      deleting: false\n  \t};\n  }\n\n  componentDidMount() {\n    if (!this.props.new) {\n      let queryParams = qs.parse(this.props.location.search, { ignoreQueryPrefix: true })\n      let identifier = queryParams.id\n      if (identifier) {\n        this.fetchContact(identifier)\n      } else {\n        this.setState({\n          errors: { notFound: 'The website does not exist.' }\n        })\n      }\n    }\n  }\n\n  fetchContact = (identifier) => {\n    this.setState({\n      loading: true\n    })\n    Contact.get(identifier).then(contact => {\n      if (contact) {\n        this.setState({\n          contact: contact,\n          identifier: contact.identifier,\n          lastName: contact.lastName || \"\",\n          blockstackID: contact.blockstackID || \"\",\n          email: contact.email || \"\",\n          loading: false\n        })\n      } else {\n        this.setState({\n          loading: false,\n          errors: { notFound: 'Error fetching contact data.' }\n        })\n      }\n    })\n    .catch(error => {\n      this.setState({\n        loading: false,\n        errors: { notFound: 'Error fetching contact data.' }\n      })\n    })\n  }\n\n  onChange(e, field) {\n    e.preventDefault()\n    if (e.target.value.length < 50) {\n      this.setState({\n        [field]: e.target.value\n      })\n    }\n  }\n\n  validateInput = () => {\n    let errors = {}\n    if (this.state.lastName === '') {\n      errors.lastName = 'Please enter a website.'\n    }\n\n    return errors\n  }\n\n  checkExisting = (identifier) => {\n    return Contact.get(identifier)\n      .then((contact) => {\n        if (contact) {\n          return true\n        } else {\n          return false\n        }\n      })\n      .catch(() => {\n        return false\n      })\n  }\n\n  handleSave = () => {\n    if (!this.state.saving) {\n      let errors = this.validateInput()\n      if (Object.entries(errors).length) {\n        this.setState({\n          errors\n        })\n        return\n      }\n\n      this.setState({\n        saving: true\n      })\n\n      if (this.state.new) {\n        const newContact = this.createNewContact()\n        return this.checkExisting(newContact.constructIdentifier())\n        .then((contactExists) => {\n          if (contactExists) {\n            this.setState({\n              errors: {contactExists: ` \"${this.state.lastName}\" already exists, cannot overwrite.`},\n              saving: false\n            })\n          } else {\n            return newContact.save().then(() => {\n              this.props.history.push('/')\n            })\n          }\n        })\n      } else {\n        return this.saveContact()\n      }\n    }\n  }\n\n  createNewContact = () => {\n    const newContact = {\n      lastName: this.state.lastName,\n      blockstackID: this.state.blockstackID,\n      email: this.state.email,\n    }\n\n    var contact = new Contact(newContact)\n    return contact\n  }\n\n  saveContact = () => {\n    if (this.state.contact) {\n      let newContact = this.state.contact\n      newContact.lastName = this.state.lastName\n      newContact.blockstackID = this.state.blockstackID\n      newContact.email = this.state.email\n      this.setState({\n        contact: newContact\n      })\n      newContact.save().then(() => {\n        this.props.history.push('/')\n      })\n    }\n  }\n\n  handleDelete = () => {\n    if (!this.state.deleting) {\n      this.setState({\n        deleting: true\n      })\n      if (this.state.contact) {\n        this.state.contact.delete().then(() => {\n          this.props.history.push('/')\n        })\n      }\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">{this.state.new ? 'New Credentials' : 'View/Edit Password'}</h1>\n        { this.state.errors.notFound && this.state.errors.notFound }\n        { this.state.loading && 'Loading...'}\n        { !this.state.loading && !this.state.errors.notFound && \n          <div className=\"panel\">\n            <InputGroup>\n              Website <br/>\n              <span className=\"input-error\">{this.state.errors.lastName}</span>\n              <Input \n                type=\"text\" \n                value={this.state.lastName} \n                onChange={e => this.onChange(e, 'lastName')}\n              />\n            </InputGroup>\n            <InputGroup>\n              Username/Email <br/>\n              <Input \n                type=\"text\" \n                value={this.state.blockstackID} \n                onChange={e => this.onChange(e, 'blockstackID')}\n              />\n            </InputGroup>\n            <InputGroup>\n              Password <br/>\n              <Input \n                type=\"text\" \n                value={this.state.email} \n                onChange={e => this.onChange(e, 'email')}\n              />\n            </InputGroup>\n            <br/>\n            { this.state.errors.contactExists && \n              <span className=\"input-error\">{this.state.errors.contactExists}<br/><br/></span> }\n              <div className=\"button-group\">\n                <button\n                  className=\"btn btn-primary btn-lg\"\n                  id=\"save-button\"\n                  disabled={this.state.saving}\n                  onClick={this.handleSave}\n                >\n                  {this.state.saving ? 'Almost Done...' : 'Save' }\n                </button>\n                <button\n                  className=\"btn btn-danger btn-lg\"\n                  id=\"delete-button\"\n                  disabled={this.state.deleting}\n                  onClick={this.handleDelete}\n                >\n                  {this.state.deleting ? 'Deleting...' : 'Delete' }\n                </button>\n              </div>\n            <Link\n              className=\"btn btn-default btn-lg\"\n              to=\"/\"\n            >\n              Back\n            </Link>\n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default withRouter(EditContact)","import React, { Component } from 'react';\nimport {\n  Contact\n} from 'blockstack-collections'\nimport { Link } from 'react-router-dom'\n\nexport default class ListContacts extends Component {\n\n  constructor(props) {\n  \tsuper(props);\n\n  \tthis.state = {\n      contacts: [],\n      loaded: false\n  \t};\n  }\n\n  componentDidMount() {\n    Contact.list((identifier) => {\n      let newContacts = this.state.contacts\n      newContacts.push(identifier)\n      this.setState({\n        contacts: newContacts,\n        loaded: true\n      })\n      return true\n    })\n  }\n\n  render() {\n    return (\n      <div className=\"panel-landing\" id=\"section-1\">\n        <h1 className=\"landing-heading\">KeyWatch</h1>\n        <div className=\"panel\">\n          <div className=\"contact-list\">\n            {this.state.contacts.length === 0 && this.state.loaded && <p>Nothing here yet</p>}\n            {this.state.contacts.map((contact, index) => {\n              return (\n                <p key={index}>        \n                  <Link\n                    className=\"btn-contact\"\n                    to={\"/edit?id=\" + contact}>\n                    {contact}\n                  </Link>\n                </p>\n              )\n            })}\n            <Link\n              className=\"btn btn-primary btn-lg\"\n              to=\"/new\"\n            >\n              Add New Credentials\n            </Link>\n            <br/><br/><button className=\"btn btn-sm btn-primary topright\" onClick={this.props.handleSignOut}>Log out</button>\n            <p>Hint: Click on credentials to view/edit/delete them</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport Signin from './Signin.js';\nimport EditContact from './EditContact.js';\nimport ListContacts from './ListContacts.js';\nimport {\n  UserSession,\n  AppConfig,\n  makeAuthRequest\n} from 'blockstack';\nimport {\n  Contact\n} from 'blockstack-collections'\nimport {\n  Switch,\n  Route\n} from 'react-router-dom'\n\nconst appConfig = new AppConfig()\nconst userSession = new UserSession({ appConfig: appConfig })\n\nexport default class App extends Component {\n\n\n  handleSignIn(e) {\n    e.preventDefault();\n    // userSession.redirectToSignIn();\n\n    const scopes = ['store_write', 'email', 'publish_data', Contact.scope]\n    const appConfig = new AppConfig(scopes)\n\n    // Solicit gaia sign in redirect\n    const userSession = new UserSession({appConfig: appConfig})\n    const authRequest = makeAuthRequest(undefined, undefined, undefined, scopes, undefined, undefined, {\n      solicitGaiaHubUrl: true,\n      recommendedGaiaHubUrl: 'https://staging-hub.blockstack.xyz'\n    })\n\n    userSession.redirectToSignInWithAuthRequest(authRequest)\n  }\n\n  handleSignOut(e) {\n    e.preventDefault();\n    userSession.signUserOut(window.location.origin);\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        <div className=\"site-wrapper-inner\">\n          { !userSession.isUserSignedIn() ?\n            <Signin userSession={userSession} handleSignIn={ this.handleSignIn } />\n            : <Switch>\n                <Route exact path='/' render={() => <ListContacts handleSignOut={this.handleSignOut} />} />\n                <Route path='/edit' component={EditContact} />\n                <Route path='/new' render={() => <EditContact new />} />\n              </Switch>\n          }\n        </div>\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    if (userSession.isSignInPending()) {\n      userSession.handlePendingSignIn().then((userData) => {\n        window.history.replaceState({}, document.title, \"/\")\n        this.setState({ userData: userData})\n      });\n    }\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}